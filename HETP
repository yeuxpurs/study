<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HETP 대화형 학습 가이드</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Noto Sans KR -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- KaTeX for LaTeX Math Rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" xintegrity="sha384-n8MVd4RsNIU0KOVEMeaMurDcGvSummEW7rSeEGcNewPej4xPilGBLIrG7QPcPjtts" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" xintegrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" xintegrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide-react@0.292.0/dist/lucide-react.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        /* LaTeX auto-rendering requires this for inline math */
        .katex-display > .katex {
            text-align: left;
            display: inline-block;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }
        /* For smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <div class="container mx-auto flex flex-col lg:flex-row p-4 lg:p-8 gap-8">
        
        <!-- Sidebar Navigation -->
        <aside class="lg:w-1/4 lg:sticky lg:top-8 self-start bg-white p-6 rounded-xl shadow-md">
            <h2 class="text-xl font-bold text-blue-700 mb-4 border-b pb-2">학습 목차</h2>
            <nav id="nav-menu">
                <ul class="space-y-2">
                    <!-- Nav items will be dynamically generated by JS -->
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="lg:w-3/4 w-full">
            <header class="mb-8 p-6 bg-blue-700 text-white rounded-xl shadow-lg">
                <h1 class="text-3xl font-bold">HETP (Height Equivalent to a Theoretical Plate) 완전 정복</h1>
                <p class="mt-2 text-blue-200">포장탑 설계의 핵심, HETP의 모든 것을 알아보세요.</p>
            </header>

            <div class="space-y-8">
                
                <!-- Section 1: Definition -->
                <section id="definition" class="p-6 bg-white rounded-xl shadow-md scroll-mt-20">
                    <h3 class="text-2xl font-semibold mb-4 flex items-center"><i data-lucide="book-open" class="w-6 h-6 mr-3 text-blue-600"></i>1. HETP란?</h3>
                    <div class="space-y-3">
                        <p><strong class="text-blue-600">정의:</strong> 포장탑(packed column)에서 이론단수 1단(plate)에 해당하는 분리 성능을 얻기 위해 필요한 포장층의 높이를 의미합니다.</p>
                        <p><strong class="text-blue-600">목적:</strong> McCabe-Thiele 방법 등으로 계산한 추상적인 '이론단수($N_{th}$)'를 실제 설비의 물리적인 '포장 높이($Z$)'로 변환하는 핵심적인 다리 역할을 합니다.</p>
                        <div class="mt-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg">
                            <p class="text-lg font-mono text-center">$$ \text{HETP} = \frac{Z}{N_{th}} $$</p>
                        </div>
                    </div>
                </section>

                <!-- Section 2: HTU-NTU Relationship -->
                <section id="htu-ntu" class="p-6 bg-white rounded-xl shadow-md scroll-mt-20">
                    <h3 class="text-2xl font-semibold mb-4 flex items-center"><i data-lucide="link-2" class="w-6 h-6 mr-3 text-blue-600"></i>2. HTU-NTU 접근과의 관계</h3>
                    <p class="mb-4">실제 설계에서는 물질전달계수를 기반으로 한 HTU-NTU 방법으로 포장 높이를 계산하고, 이를 HETP와 비교하며 타당성을 검토합니다.</p>
                    <div class="my-4 p-4 bg-green-50 border-l-4 border-green-500 rounded-r-lg">
                        <p class="text-lg font-mono text-center">$$ Z = \text{HTU} \times \text{NTU} $$</p>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left border-collapse">
                            <thead class="bg-slate-200">
                                <tr>
                                    <th class="p-3 font-semibold">기호</th>
                                    <th class="p-3 font-semibold">의미</th>
                                    <th class="p-3 font-semibold">대표식 (기체 기준)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-slate-50">
                                    <td class="p-3 font-mono">HTU</td>
                                    <td class="p-3">전달단위높이 (Height of Transfer Unit)</td>
                                    <td class="p-3">$$ \text{HTU}_G = \frac{G}{K_G a} $$</td>
                                </tr>
                                <tr class="border-b hover:bg-slate-50">
                                    <td class="p-3 font-mono">NTU</td>
                                    <td class="p-3">전달단위수 (Number of Transfer Units)</td>
                                    <td class="p-3">$$ \text{NTU}_G = \int_{y_2}^{y_1} \frac{dy}{y^* - y} $$</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                     <div class="mt-4 p-3 bg-yellow-50 border border-yellow-300 rounded-lg text-sm">
                        <p><strong class="font-semibold">핵심 관계:</strong> 평형선과 조작선이 평행한 특수한 경우, $ \text{NTU} \approx N_{th} $가 성립하여 $ \text{HETP} \approx \text{HTU} $로 근사할 수 있습니다. 이는 두 개념의 물리적 의미가 유사함을 시사합니다.</p>
                    </div>
                </section>

                <!-- Section 3: Calculation Procedure -->
                <section id="procedure" class="p-6 bg-white rounded-xl shadow-md scroll-mt-20">
                    <h3 class="text-2xl font-semibold mb-4 flex items-center"><i data-lucide="list-checks" class="w-6 h-6 mr-3 text-blue-600"></i>3. HETP 계산 절차 (시험 대비)</h3>
                    <ol class="relative border-l border-gray-200 dark:border-gray-700 ml-4">
                        <li class="mb-10 ml-6">
                            <span class="absolute flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full -left-4 ring-8 ring-white">1</span>
                            <h4 class="font-semibold">조건 정리</h4>
                            <p class="text-sm text-gray-600">탑 압력, 환류비, 유량 결정</p>
                        </li>
                        <li class="mb-10 ml-6">
                            <span class="absolute flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full -left-4 ring-8 ring-white">2</span>
                            <h4 class="font-semibold">이론단수($N_{th}$) 산정</h4>
                            <p class="text-sm text-gray-600">McCabe-Thiele 등 방법 사용</p>
                        </li>
                        <li class="mb-10 ml-6">
                            <span class="absolute flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full -left-4 ring-8 ring-white">3</span>
                            <h4 class="font-semibold">포장 형식 선정</h4>
                            <p class="text-sm text-gray-600">Pall ring (랜덤), Mellapak (구조형) 등</p>
                        </li>
                         <li class="mb-10 ml-6">
                            <span class="absolute flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full -left-4 ring-8 ring-white">4</span>
                            <h4 class="font-semibold">HTU 계산</h4>
                            <p class="text-sm text-gray-600">상관식/제조사 데이터 활용</p>
                        </li>
                         <li class="mb-10 ml-6">
                            <span class="absolute flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full -left-4 ring-8 ring-white">5</span>
                            <h4 class="font-semibold">NTU 계산</h4>
                            <p class="text-sm text-gray-600">수치적분 또는 근사식 사용</p>
                        </li>
                         <li class="mb-10 ml-6">
                            <span class="absolute flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full -left-4 ring-8 ring-white">6</span>
                            <h4 class="font-semibold">포장 높이($Z$) 결정</h4>
                            <p class="text-sm text-gray-600">$ Z = \text{HTU} \times \text{NTU} $</p>
                        </li>
                        <li class="ml-6">
                            <span class="absolute flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full -left-4 ring-8 ring-white">7</span>
                            <h4 class="font-semibold">HETP 최종 검토</h4>
                            <p class="text-sm text-gray-600">$ \text{HETP} = Z / N_{th} $ 계산 후 설계 여유 부여</p>
                        </li>
                    </ol>
                </section>
                
                <!-- Section 4: Correlations -->
                <section id="correlations" class="p-6 bg-white rounded-xl shadow-md scroll-mt-20">
                    <h3 class="text-2xl font-semibold mb-4 flex items-center"><i data-lucide="function-square" class="w-6 h-6 mr-3 text-blue-600"></i>4. 대표 상관식 예시</h3>
                    <div>
                        <div class="mb-4 border-b border-gray-200">
                            <nav class="flex -mb-px" id="corr-tabs">
                                <button data-target="onda" class="tab-btn border-b-2 border-blue-500 text-blue-600 py-4 px-6 block hover:text-blue-600 focus:outline-none font-medium">Onda (1968) - 랜덤 포장</button>
                                <button data-target="billet" class="tab-btn border-transparent py-4 px-6 block hover:text-blue-600 focus:outline-none text-gray-500">Billet-Schultes (1999) - 구조형</button>
                            </nav>
                        </div>
                        <div id="corr-content">
                            <div id="onda" class="tab-content p-4 bg-gray-50 rounded-lg">
                                <h4 class="font-bold text-lg mb-2">Onda's Correlation</h4>
                                <p class="mb-4">가스 측 물질전달계수($K_G$)를 예측하는 고전적이고 유명한 식입니다.</p>
                                <div class="font-mono bg-white p-4 rounded shadow-inner">$$ \frac{K_G a D_G}{G} = 5.23 (a d_p)^{0.7} Re_G^{-0.2} Sc_G^{-1/3} (\frac{\sigma_c}{\sigma})^{-0.52} $$</div>
                                <p class="mt-4 text-sm text-gray-600">이로부터 $ \text{HTU}_G = G / (K_G a) $를 계산할 수 있습니다.</p>
                            </div>
                            <div id="billet" class="tab-content hidden p-4 bg-gray-50 rounded-lg">
                                <h4 class="font-bold text-lg mb-2">Billet-Schultes's Correlation</h4>
                                <p class="mb-4">구조형 포장에 대해 더 정확한 예측을 제공하는 현대적인 상관식입니다.</p>
                                <div class="font-mono bg-white p-4 rounded shadow-inner">$$ \text{HTU}_L = C_L \left( \frac{g \rho_L}{\mu_L} \right)^{-1/2} \left( \frac{L}{a \mu_L} \right)^{n} \left( \frac{L^2 a}{\rho_L^2 g} \right)^{p} $$</div>
                                <p class="mt-4 text-sm text-gray-600">$C_L, n, p$ 등은 포장재의 종류와 특성에 따라 달라지는 상수입니다.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 5: Variables -->
                <section id="variables" class="p-6 bg-white rounded-xl shadow-md scroll-mt-20">
                    <h3 class="text-2xl font-semibold mb-4 flex items-center"><i data-lucide="sliders-horizontal" class="w-6 h-6 mr-3 text-blue-600"></i>5. HETP 값에 영향을 주는 주요 변수</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left border-collapse">
                            <thead class="bg-slate-200">
                                <tr>
                                    <th class="p-3 font-semibold">구분</th>
                                    <th class="p-3 font-semibold">영향 경향 (HETP 기준)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-slate-50">
                                    <td class="p-3 font-medium">포장 종류</td>
                                    <td class="p-3">효율적인 <span class="font-bold text-green-600">구조형</span>이 불규칙한 <span class="font-bold text-red-600">랜덤형</span>보다 HETP가 낮다.</td>
                                </tr>
                                <tr class="border-b hover:bg-slate-50">
                                    <td class="p-3 font-medium">액체 유속 (L)</td>
                                    <td class="p-3">과소 시 젖음 불량, 과다 시 플러딩으로 HETP <span class="font-bold text-red-600">↑</span> (최적점 존재)</td>
                                </tr>
                                <tr class="border-b hover:bg-slate-50">
                                    <td class="p-3 font-medium">기체 유속 (G)</td>
                                    <td class="p-3">너무 높으면 액막 지연(hold-up) 및 플러딩으로 HETP <span class="font-bold text-red-600">↑</span></td>
                                </tr>
                                 <tr class="border-b hover:bg-slate-50">
                                    <td class="p-3 font-medium">물성 ($\mu, \sigma$)</td>
                                    <td class="p-3">점도($\mu$) <span class="font-bold text-red-600">↑</span> → 물질전달 저하 → HETP <span class="font-bold text-red-600">↑</span><br>표면장력($\sigma$) <span class="font-bold text-green-600">↓</span> → 젖음성 향상 → HETP <span class="font-bold text-green-600">↓</span></td>
                                </tr>
                                <tr class="border-b hover:bg-slate-50">
                                    <td class="p-3 font-medium">탑 직경/분배기</td>
                                    <td class="p-3">탑 직경이 크거나 액체 분배가 불량하면 채널링 발생으로 HETP <span class="font-bold text-red-600">↑</span></td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="p-3 font-medium">오염/발포</td>
                                    <td class="p-3">유효 표면적 감소, 기포막 형성 등으로 효율 저하 → HETP <span class="font-bold text-red-600">↑</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                
                <!-- Section 6: Typical Values -->
                <section id="ranges" class="p-6 bg-white rounded-xl shadow-md scroll-mt-20">
                    <h3 class="text-2xl font-semibold mb-4 flex items-center"><i data-lucide="ruler" class="w-6 h-6 mr-3 text-blue-600"></i>6. 전형적 HETP 범위 (참고값)</h3>
                    <div class="grid md:grid-cols-3 gap-4 text-center">
                        <div class="p-4 bg-green-100 rounded-lg">
                            <h4 class="font-bold text-green-800">금속 가제 구조형</h4>
                            <p class="text-2xl font-mono font-bold text-green-700 my-2">0.2 - 0.5 m</p>
                            <p class="text-sm text-green-600">(Mellapak 250Y)</p>
                        </div>
                        <div class="p-4 bg-yellow-100 rounded-lg">
                            <h4 class="font-bold text-yellow-800">플라스틱 랜덤형</h4>
                            <p class="text-2xl font-mono font-bold text-yellow-700 my-2">0.6 - 0.9 m</p>
                            <p class="text-sm text-yellow-600">(25mm Pall ring)</p>
                        </div>
                        <div class="p-4 bg-red-100 rounded-lg">
                            <h4 class="font-bold text-red-800">세라믹 고전형</h4>
                            <p class="text-2xl font-mono font-bold text-red-700 my-2">1.0 - 1.5 m</p>
                            <p class="text-sm text-red-600">(Raschig ring)</p>
                        </div>
                    </div>
                </section>

                <!-- Section 7 & 8: Summary -->
                <section id="summary" class="scroll-mt-20">
                    <div class="accordion">
                        <div class="accordion-item border rounded-xl shadow-md bg-white">
                            <button class="accordion-header w-full text-left p-6 flex justify-between items-center transition hover:bg-slate-50">
                                <h3 class="text-2xl font-semibold flex items-center"><i data-lucide="check-circle" class="w-6 h-6 mr-3 text-blue-600"></i>7. 시험 포인트 정리</h3>
                                <i data-lucide="chevron-down" class="w-6 h-6 transition-transform"></i>
                            </button>
                            <div class="accordion-content hidden p-6 border-t">
                                <ul class="list-disc list-inside space-y-2">
                                    <li>정의 식 암기: $ \text{HETP} = Z / N_{th} $</li>
                                    <li>HTU-NTU 관계와 $ \text{HETP} \approx \text{HTU} $ 조건 이해</li>
                                    <li>주요 변수(유속, 포장종류 등)가 HETP에 미치는 영향 방향</li>
                                    <li>상관식 종류 구분 (Onda vs. Billet-Schultes)</li>
                                    <li>대표 수치 암기: 구조형 ~0.3m, 랜덤형 ~0.8m</li>
                                    <li>설계 순서의 큰 흐름 파악</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="accordion mt-8">
                        <div class="accordion-item border rounded-xl shadow-md bg-white">
                            <button class="accordion-header w-full text-left p-6 flex justify-between items-center transition hover:bg-slate-50">
                                <h3 class="text-2xl font-semibold flex items-center"><i data-lucide="lightbulb" class="w-6 h-6 mr-3 text-blue-600"></i>8. 마무리 Tip</h3>
                                <i data-lucide="chevron-down" class="w-6 h-6 transition-transform"></i>
                            </button>
                            <div class="accordion-content hidden p-6 border-t">
                                <ul class="list-disc list-inside space-y-3">
                                   <li>실제 설계 시에는 Aspen Plus, Sulzer PackCol 등 전용 소프트웨어를 활용하여 더 정확한 값을 얻습니다.</li>
                                   <li>최신 연구 동향으로 CFD(전산유체역학)나 AI를 이용한 HETP 예측 모델을 언급하면 좋은 인상을 줄 수 있습니다.</li>
                                   <li>제조사에서 제공하는 성능 데이터를 확인하는 것이 가장 신뢰도 높은 방법 중 하나입니다.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Render LaTeX math
            renderMathInElement(document.body, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false},
                ]
            });

            // Icons
            lucide.createIcons();

            // Interactive Tabs for Correlations
            const tabs = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetId = tab.dataset.target;

                    tabs.forEach(t => {
                        t.classList.remove('border-blue-500', 'text-blue-600');
                        t.classList.add('border-transparent', 'text-gray-500');
                    });
                    tab.classList.add('border-blue-500', 'text-blue-600');
                    tab.classList.remove('border-transparent', 'text-gray-500');

                    tabContents.forEach(content => {
                        if (content.id === targetId) {
                            content.classList.remove('hidden');
                        } else {
                            content.classList.add('hidden');
                        }
                    });
                });
            });

            // Accordion for summary sections
            const accordions = document.querySelectorAll('.accordion-header');
            accordions.forEach(accordion => {
                accordion.addEventListener('click', () => {
                    const content = accordion.nextElementSibling;
                    const icon = accordion.querySelector('[data-lucide="chevron-down"]');
                    
                    content.classList.toggle('hidden');
                    icon.classList.toggle('rotate-180');
                });
            });

            // Dynamic Sidebar Navigation & Scroll Spy
            const navMenu = document.getElementById('nav-menu').querySelector('ul');
            const sections = document.querySelectorAll('main section');
            const navLinks = new Map();

            sections.forEach(section => {
                const id = section.id;
                const title = section.querySelector('h3').innerText;
                const li = document.createElement('li');
                li.innerHTML = `<a href="#${id}" class="block p-2 rounded-md hover:bg-blue-50 text-slate-700 transition-colors nav-link">${title}</a>`;
                navMenu.appendChild(li);
                navLinks.set(section, li.querySelector('a'));
            });
            
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    const link = navLinks.get(entry.target);
                    if (entry.isIntersecting && entry.intersectionRatio >= 0.5) {
                        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('bg-blue-100', 'font-semibold', 'text-blue-700'));
                        link.classList.add('bg-blue-100', 'font-semibold', 'text-blue-700');
                    }
                });
            }, { threshold: 0.5 }); // Trigger when 50% of the section is visible

            sections.forEach(section => observer.observe(section));

        });
    </script>
</body>
</html>
